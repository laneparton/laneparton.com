---
import Layout from "../layouts/Layout.astro";
import bookmarks from "../content/bookmarks/bookmarks.json";

console.log(bookmarks);

const groupedBookmarks = {};

bookmarks.forEach(bookmark => {
    const date = new Date(bookmark.add_date);
    const monthYear = date.toLocaleString('default', { month: 'long', year: 'numeric' });

    if (!groupedBookmarks[monthYear]) {
      groupedBookmarks[monthYear] = [];
    }

    groupedBookmarks[monthYear].push(bookmark);
});


---

<Layout title="Links">
  <div class="container mx-auto mb-12 mt-32">
    <h2 class="text-4xl text-white mb-4 mt-12">Links</h2>
    <p class="mb-8">
      Things I liked reading or watching and want to find again in the future
    </p>

    {
      Object.entries(groupedBookmarks).map(([monthYear, bookmarks]) => (
        <div key={monthYear}>
          <h3 class="text-2xl text-white mt-8 mb-4">{monthYear}</h3>
          <ul class="list-disc list-inside">
            {
            bookmarks.map((bookmark) => (
              <li key={bookmark.href} class="mb-2 text-lg">
                <a href={bookmark.href}>
                  {bookmark.title}
                </a>
              </li>
            ))
          }
          </ul>
        </div>
      ))
    }
  </div>
</Layout>